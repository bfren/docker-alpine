#!/usr/bin/env nu

use ../../lib/bf/

# Add a non-login user and group of the specified name, optionally specifying UID and GID
def main [
    name: string      # The name of the user and group to add
    --uid: int = 1000 # The UID
    --gid: int        # The GID (default: UID)
] {
    bf print debug $"Adding user ($name) with UID ($uid) and GID ($gid | $uid)." "bf-adduser"
    addgroup --gid ($gid | $uid) $name
    adduser --uid $uid --home $"/home/($name)" --disabled-login --disabled-password --ingroup $name $name
    bf print debug "Done." "bf-adduser"
}
