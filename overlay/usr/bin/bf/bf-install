#!/bin/sh

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Ensure bf executables are... executable.
#======================================================================================================================

chmod +x ${BF_BIN}/*


#======================================================================================================================
# Store image version.
#======================================================================================================================

echo "${BF_IMAGE/docker-/}" > BF_IMAGE
echo "${BF_VERSION}" > /BF_VERSION
bf-image


#======================================================================================================================
# Run install script in /tmp and then perform cleanup.
#======================================================================================================================

INSTALL=/tmp/install
[[ ! -f ${INSTALL} ]] && bf-error "${INSTALL} does not exist."

chmod +x ${INSTALL} && ${INSTALL}
bf-done

bf-clear
